// For license information, see `https://assets.adobedtm.com/717b2dc27cb7/4c431fd993b8/5aa9359e17fd/RC9d139fe29d8048ea87ed9776da2841ae-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/717b2dc27cb7/4c431fd993b8/5aa9359e17fd/RC9d139fe29d8048ea87ed9776da2841ae-source.min.js', "globalThis.window||(globalThis.window=globalThis),globalThis.adobeDataLayer=globalThis.adobeDataLayer||[];class DataLayerMapper{getMap(){return this.m=this.m||globalThis._satellite&&globalThis._satellite.getVar(\"DL-Map\")}setMap(e){this.m=e}getDLstd(){return this.dlStd=this.dlStd||globalThis._satellite&&globalThis._satellite.getVar(\"DL-Std\")}setDLstd(e){this.dlStd=e}parallelTraverse(e,t,a,s,r={},i,l=\"\"){const n=(e,t)=>{const s=e.slice(1),i=e[0].toLowerCase(),l=isNaN(s)?e:(\"v\"===i?\"eVar\":\"c\"===i?\"prop\":\"event\")+s;let n=!0;switch(i){case\"n\":isNaN(s)||(this.eventSet.add(l+\"=\"+t),n=!1);break;case\"p\":switch(e[1]){case\"n\":r.nSet.add(\"event\"+e.slice(2)+\"=\"+t),n=!1;break;case\"v\":\"datalayer field empty\"!==t&&(r.vSet.add(\"eVar\"+e.slice(2)+\"=\"+t),n=!1);break;case\":\":r[e.slice(2)]=t,n=!1}n||(a.linkTrackVars&&a.linkTrackVars.indexOf(\",products\")<0&&(a.linkTrackVars+=\",products\"),r.isUsed=!0)}n&&(\"events\"===l?this.eventSet.add(t):\"datalayer field empty\"!==t&&(\"function\"==typeof a[l]?a[l](t):(a[l]=t&&t.toLowerCase&&e[0]===i?t.toLowerCase():t,a.linkTrackVars=(a.linkTrackVars&&\"None\"!==a.linkTrackVars?a.linkTrackVars+\",\":\"events,\")+l)))};return a=a||{},s=void 0===s?0:s,i||(i={mapping:e,data:t}),this.eventSet=this.eventSet||a.events&&new Set(a.events.split(\",\"))||new Set,this.productSets=this.productSets||[],Object.entries(e).forEach((([o,c])=>{switch(typeof c){case\"object\":t&&t[o]&&this.parallelTraverse(c,t[o],a,s+1,r,i,l+\".\"+o);break;case\"function\":try{n(o,c(t))}catch(e){}break;case\"string\":if(0===o.indexOf(\"linked\")){let e=\"string\"==typeof t[o]?[t[o]]:t[o];Array.isArray(e)||(e=e&&Object.keys(e)||[]),e.forEach((e=>{let t={nSet:new Set,vSet:new Set};this.parallelTraverse(i.mapping[c][\"*\"],i.data[c][e],a,s+1,t,i,l+\".\"+o),t.isUsed&&this.productSets.push(t)}))}else if(\"string\"==typeof t||t[o]){c.split(\";\").forEach((e=>{const a=e.split(\",\");n(a[0],\"string\"==typeof t?t:t[o]),a.slice(1).forEach((e=>n(e,\"D=\"+a[0])))}))}}if((Array.isArray(t)?t:[t]).indexOf(o)>=0){const t=Array.isArray(e[o])?e[o]:[e[o]];t.filter((e=>e>0)).length===t.length&&t.map((e=>\"event\"+e)).forEach(this.eventSet.add,this.eventSet)}})),0===s&&(a.products=this.productSets.map((e=>([...e.nSet].forEach((e=>this.eventSet.add(e.split(\"=\")[0]))),(e.category||\"\")+\";\"+(e.id||\"\")+\";\"+(e.amount||\"\")+\";\"+(e.total||\"\")+\";\"+[...e.nSet].join(\"|\")+\";\"+[...e.vSet].join(\"|\")))).join(\",\"),a.events=[...this.eventSet].join(\",\"),a.linkTrackEvents=\"\"),a}clearExtraVars(e){e.events=this.eventSet=e.linkTrackVars=this.productSets=void 0}map({dataLayer:e,event:t}){return this.parallelTraverse(this.getMap(),t,this.parallelTraverse(this.getMap(),e))}mapSatellite({dataLayer:e,event:t,s:a,acdl_event:s}){return t=t||s&&s.message||{},e=e||s&&s.fullState||globalThis.adobeDataLayer.getState(),a=a||{},this.clearExtraVars(a),this.parallelTraverse(this.getMap(),this.getDLstd(),a),this.parallelTraverse(this.getMap(),Object.assign({},e,t),a),a}_getVersion(){return\"[VI]{version} - {date}[/VI]\"}}globalThis.adobeDataLayer.mapper=new DataLayerMapper;");